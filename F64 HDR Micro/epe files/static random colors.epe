{
  "name": "static random colors",
  "id": "SjRfgcSSYXWAunFjZ",
  "sources": {
    "main": "/* \n  Static random colors\n  \n  What if you need a sequence of random numbers? Well, you could set up a loop\n  that runs once and populates an array with random values. \n  \n    var a = array(n)\n    for(i = 0; i < n; i++) a[i] = random(1)\n  \n  They would be a different sequence of random values each time you restarted\n  the pattern. But what if you need to be able to access the same sequence of\n  random numbers each time you run your program? You need a pseudorandom number\n  generator (PRNG) that accepts a seed. The same random sequence is repeatably\n  generated when the PRNG is given a particular seed. \n\n  This pattern generates random colors each time it's loaded. With a simple\n  tweak, it can render the same random sequence on each restart.\n*/\n\n// This seed will be set to a random value each time the pattern is loaded.\n// Change to a constant to freeze a particular pseudorandom sequence.\nvar seed = random(0xffff) \n\n// 16 bit xorshift from \n// http://www.retroprogramming.com/2017/07/xorshift-pseudorandom-numbers-in-z80.html\nvar xs\nfunction xorshift() {\n  xs ^= xs << 7\n  xs ^= xs >> 9\n  xs ^= xs << 8\n  return xs\n}\n\n// Return a pseudorandom value between 0 and 1\nfunction pseudorandomFraction() {\n  return xorshift() / 100 % 1\n}\n\nexport function beforeRender(delta) {\n  /*\n    Reset the initial shift register for each render frame so that each frame\n    renders the same random sequence. Need repeatability across power cycles?\n    Set this to a particular constant. Like 42.\n  */\n  xs = seed \n  \n  t1 = time(5.4 / 65.536) // Used to fade each pixel in and out\n}\n\nexport function render(index) {\n  h = pseudorandomFraction()\n\n  /*\n    s will be a different random 0..1 value from h, and is not correlated with\n    the prior output, but it is dependent on the state of the shift register\n    that just generated h. Each result from pseudorandomFraction() is random,\n    yet dependent on the seed and all prior states of the shift register.\n\n    Put another way, you'll see there are three calls to pseudorandomFraction(),\n    so each one is consuming a value from the deterministic random sequence,\n    then on the next render() they consume the next three values, etc.\n  */ \n  s = pseudorandomFraction()\n\n  // Adjust saturation to favor vibrant colors, but still allow whites/pastels\n  s = 1 - s * s * s \n\n  // Each pixel is faded in and out with a random phase. To make it truly\n  // static, set v to be 1.\n  v = wave(t1 + pseudorandomFraction())\n  \n  hsv(h, s, v * v)\n}\n"
  },
  "preview": "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"
}